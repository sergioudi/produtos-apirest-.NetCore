name: deploy-Heroku

on:
    push:
        branches: [ main ]
    pull_request:
        branches: [ main ]
    workflow_dispatch:

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v3
        - name: Build and deploy the Docker image
          env:
            Heroku_API_KEY: ${{ secrets.HEROKU_API_KEY }}
            Heroku_APP_NAME: ${{ secrets.Heroku_APP_NAME }}
          run: |
            heroku container:login
            Heroku container:push web -a $Heroku_APP_NAME
            Heroku container:release web -a $Heroku_APP_NAME
